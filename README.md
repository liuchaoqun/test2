# Captcha Recognition System

This project implements a captcha recognition system that can process and predict text from captcha images. The system uses image processing techniques and template matching to recognize characters in captcha images.

## How It Works
Since the captchas generated by the system are quite similar each time, we can segment the characters from the captcha image and then match the characters against the character templates to predict the captcha.

**Preprocessing**:
   1. Convert the image to grayscale.
   2. Apply thresholding to obtain a binary image.
   3. Segment individual characters and associate them with their corresponding labels.
   4. Generate character templates for recognition.

**Prediction**:
   1. Processes the input image.
   2. Compares segmented characters to stored templates.
   3. Produces a prediction by selecting the closest template matches.

## Features

- Image preprocessing and character segmentation
- Template-based character recognition
- Support for 5-character captcha images
- Command-line interface for easy usage

## Installation

1. Clone the repository:
```bash
git clone https://github.com/liuchaoqun/test2.git
cd test2
```

2. Install the required dependencies:
```bash
pip install -r requirements.txt
```

## Project Structure

```
.
├── pre_process.py      # Preprocess the sample captcha images and extract the character templates
├── predict.py         # Predict the captcha image
├── requirements.txt   # Project dependencies
├── results/          # Directory for storing results
│   ├── char_bounding_boxes.pkl
│   └── dic_mapping.pkl
└── sampleCaptchas/   # Sample captcha images
    ├── input/        # Input captcha images
    └── output/       # Ground truth labels
```

## Usage

### Training/Preprocessing

The preprocessing step creates character templates and bounding box information:

```bash
python pre_process.py
```

This will:
1. Process sample captcha images
2. Generate character templates
3. Save the results in the `results` directory

### Prediction

To predict a captcha image:

```bash
python predict.py --img_path "path/to/captcha.jpg" --save_path "path/to/output.txt"
```

Example:
```bash
python predict.py --img_path "sampleCaptchas/input/input100.jpg" --save_path "results/output100.txt"
```

## Notes

- The system is designed to work with 5-character captcha images
- Character templates are generated from a set of sample images
- The system uses template matching for character recognition
